<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ä¸‡æ–¹å¯è§†åŒ–ä½œä¸š2</title>
  <!-- <link rel="stylesheet" href="./src/css/style.css" /> -->
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #faf5fa;
      display: flex;
      /* æ¢å¤åŸ flex å¸ƒå±€ï¼Œä¸»ä½“ä»ä¸º sidebar + main */
      height: 100vh;
    }

    /* ä¾§è¾¹æ æ ·å¼ */
    .sidebar {
      width: 220px;
      background-color: #b443b0;
      color: #fff;
      padding: 20px 0;
      display: flex;
      flex-direction: column;
    }

    .sidebar h2 {
      text-align: center;
      font-size: 22px;
      margin-bottom: 30px;
    }

    .nav-item {
      padding: 12px 20px;
      display: flex;
      align-items: center;
      color: #eefeff;
      text-decoration: none;
      transition: background 0.3s;
    }

    .nav-item:hover {
      background-color: #2d2d45;
      color: #fff;
    }

    .nav-item i {
      margin-right: 10px;
    }

    /* ä¸»ä½“å†…å®¹åŒºåŸŸ */
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .topbar {
      height: 60px;
      background-color: #fceffb;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .content {
      flex: 1;
      padding: 20px;
    }

    /* ä»ªè¡¨ç›˜ç½‘æ ¼ï¼ˆæ”¾åœ¨ .content å†…ï¼‰ */
    .dashboard {
      width: 100%;
      height: 100%;
      display: grid;
      /* å·¦åˆ— : å³åˆ—  = 3 : 2  (ç«–å‘ 3/5 åˆ†å‰²) */
      grid-template-columns: 3fr 2fr;
      /* å·¦ä¾§ä¸Šä¸‹åˆ†åŒºï¼š3 : 2 */
      grid-template-rows: 3fr 2fr;
      grid-template-areas:
        "chord right"
        "line  right";
      gap: 4px;
      /* å¯æŒ‰éœ€è°ƒ */
    }

    /* .dashboard > div{
      background:#ffffff;
      border:1px solid #e0e0e0;
  } */
    #chord-container {
      grid-area: chord;
      position: relative;
    }

    /* å·¦ä¾§åŒºåŸŸç»Ÿä¸€ç™½åº•ä¸ç°è‰²è¾¹æ¡† */
    #chord-container {
      background: #ffffff;
      border: 1px solid #e0e0e0;
      /* å‚ç›´+æ°´å¹³å±…ä¸­ */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px 20px 10px;
      overflow: visible;
    }

    #line-container {
      background: #ffffff;
      border: 1px solid #e0e0e0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 4px 6px;
      overflow: visible;
    }
    
    #right-column {
      grid-area: right;
      display: flex;
      flex-direction: column;
    }

    #right-column>div {
      flex: 1;
      border: 1px solid #e0e0e0;
      background: #ffffff;
      padding: 20px;
      overflow: visible;
    }

    /* tooltip for chord hover */
    #tooltip {
      position: absolute;
      visibility: hidden;
      pointer-events: none;
      background: #ffffff;
      border: 1px solid #ccc;
      padding: 4px;
      border-radius: 3px;
      font-size: 12px;
      z-index: 1000;
      white-space: pre-line;
    }

    /* ç¼©å°å³ä¸ŠæŸ±çŠ¶å›¾ */
    #bar-chart {
      width: 80% !important;
      height: 80% !important;
      margin: auto;
      display: block;
    }

    /* æŸ±çŠ¶å›¾æ–‡å­—æ˜¾ç¤ºä¸è¢«å®¹å™¨è£å‰ª */
    #bar-container,
    #bar-chart {
      overflow: visible !important;
    }

    /* Chord å›¾æ ‡é¢˜ä¸å±…ä¸­ */
    #chord-container .chart-title {
      text-align: center;
      font-size: 20px;
      color: #333;
      margin-bottom: 8px;
    }

    #bar-container .chart-title {
      font-size: 20px;
      text-align: center;
      margin-bottom: 8px;
    }

    #chord-container svg {
      width: 80% !important;
      height: 95% !important;
      margin: auto;
      display: block;
    }

    #bar-chart {
      width: 80% !important;
      height: 90% !important;
      margin: auto;
      display: block;
    }

    #line-container svg {
      width: 95% !important;
      height: 88% !important;
      margin: auto;
      display: block;
    }

    #sundial-container {
      padding: 20px 20px 2px;
    }

    /* ---------- æ‚é¡¹å±•ç¤º scroll page ---------- */
    .misc-container {
      width: 100%;
      height: calc(100vh - 60px); /* é¡¶æ é«˜åº¦ä¸º60pxï¼Œå†…å®¹æ­£å¥½è´´é¡¶ */
      overflow-y: auto;
      scroll-behavior: smooth;
    }
    .viz-section{
      /* min-height: 100vh; */            /* æ¯ä¸ªå¯è§†åŒ–å æ»¡ä¸€å±é«˜åº¦ */
      display: flex;
      flex-direction: column;       /* æ ‡é¢˜åœ¨ä¸Šï¼Œå›¾åœ¨ä¸‹ */
      align-items: center;
      /* justify-content: center; */    /* Remove vertical centering */
      row-gap: 12px;                /* æ ‡é¢˜ä¸å›¾å½¢é—´è· */
      /* position: relative; */      /* Remove if not needed for layout */
    }

    .viz-title{
      font-size: 22px;
      font-weight: 600;
      color: #333;
    }
    /* å¯è§†åŒ–å®¹å™¨ï¼šå ä½ + è‡ªé€‚åº”å±…ä¸­ */
    .viz-holder {
      min-width: 300px;
      min-height: 300px;
      width: 600px;
      height: 400px;
      margin: 0 auto;
      display: flex;
      /* align-items: center; */  /* Remove vertical centering */
      justify-content: center;
      padding: 8px 0;
    }

    /* --- å›ºå®šä¾§è¾¹æ  & é¡¶æ è¦†ç›– --- */
    .sidebar{
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      overflow-y: auto;   /* èœå•å¤šæ—¶å¯ç‹¬ç«‹æ»šåŠ¨ */
      z-index: 2;
    }
    .topbar{
      position: fixed;
      left: 220px;        /* ä¸ä¾§è¾¹æ å®½åº¦ä¿æŒä¸€è‡´ */
      right: 0;
      top: 0;
      z-index: 1;
    }
    .main{
      margin-left: 220px; /* ä¸»å†…å®¹æ•´ä½“å³ç§» */
    }
    .content{
      padding-top: 60px;  /* ä¸‹æ¨ä»¥é¿å¼€å›ºå®šé¡¶æ  */
    }
  </style>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>

  <div id="tooltip"></div>

  <div class="sidebar">
    <h2>Agon ç®¡ç†å°</h2>
    <a href="#" class="nav-item" data-view="dashboard"><i>ğŸ“Š</i> ä»ªè¡¨ç›˜</a>
    <a href="#" class="nav-item" data-view="product"><i>ğŸ“¦</i> æ‚é¡¹å±•ç¤º</a>
  </div>

  <div class="main">
    <div class="topbar">
      <div>è¿™æ˜¯ä¸€ä¸ªäº¤é€šæ•°æ®å¯è§†åŒ–Demoï¼Œæ¬¢è¿æ‚¨</div>
      <div>ã€è¿™äº›éƒ½æ˜¯å‡çš„ã€‘ğŸ”” é€šçŸ¥ | âš™ï¸ è®¾ç½® | é€€å‡º</div>
    </div>

    <div class="content">
      <div class="dashboard">
        <div id="chord-container">
        </div>
        <div id="line-container"></div>
        <div id="right-column">
          <div id="bar-container">
            <svg id="bar-chart" width="100%" height="100%"></svg>
          </div>
          <div id="sundial-container"></div>
        </div>
      </div>
      <div id="product-view" class="view" style="display:none;">
        <div id="misc-container" class="misc-container">
          <section id="bubble-section" class="viz-section">
            <h2 class="viz-title">åŒºåŸŸé—´æµé‡åŠ›å¯¼æ³¡æ³¡å›¾</h2>
            <div id="bubble-viz"  class="viz-holder"></div>
          </section>
          
          <section id="bar-race-section" class="viz-section">
            <h2 class="viz-title">äº¤é€šæµé‡ç«é€Ÿæ¡å½¢å›¾</h2>
            <div id="bar-race-viz" class="viz-holder"></div>
          </section>
          
          <section id="spiral-section" class="viz-section">
            <h2 class="viz-title">åŒºåŸŸæµé‡èºæ—‹æ—¶é—´çº¿</h2>
            <div id="spiral-viz" class="viz-holder"></div>
          </section>
        </div>
      </div>

    </div>
  </div>
  <script src="./src/scripts/transchord.js"></script>
  <script src="./src/scripts/streamplot.js"></script>
  <script src="./src/scripts/sunburst.js"></script>
  <script src="./src/scripts/bubbleForce.js"></script>
  <script src="./src/scripts/barRace.js"></script>
  <script src="./src/scripts/spiralTimeline.js"></script>
  <script>
    /* ---------- è§†å›¾åˆ‡æ¢ ---------- */
    const navItems     = document.querySelectorAll('.nav-item');
    const dashboardView = document.querySelector('.dashboard');
    const productView   = document.getElementById('product-view');
  
    /** æ ¹æ® data-view æ˜¾ç¤ºå¯¹åº”åŒºåŸŸ */
    function show(view) {
      dashboardView.style.display = 'none';
      productView.style.display   = 'none';
  
      if (view === 'dashboard') {
        dashboardView.style.display = 'grid';
      }
      if (view === 'product') {
        productView.style.display = 'block';
      }
    }
  
    // é»˜è®¤å±•ç¤ºä»ªè¡¨ç›˜
    show('dashboard');
  
    // ä¾§è¾¹æ ç‚¹å‡»åˆ‡æ¢
    navItems.forEach(item => {
      item.addEventListener('click', e => {
        e.preventDefault();
        show(item.dataset.view);
      });
    });
  </script>
</body>

</html>